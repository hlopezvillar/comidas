CREATE TABLE PLATOS (IDPLATO INTEGER PRIMARY KEY AUTOINCREMENT, NOMBRE CHAR(100) NOT NULL, RECETA TEXT);
CREATE UNIQUE INDEX idx_nombre_platos ON PLATOS(NOMBRE);

CREATE TABLE UNIDADES (IDUNIDAD INTEGER PRIMARY KEY AUTOINCREMENT,TIPO CHAR(50) NOT NULL);
CREATE UNIQUE INDEX idx_tipos_unidades ON UNIDADES(TIPO);

INSERT INTO UNIDADES (TIPO) VALUES ('gr.');
INSERT INTO UNIDADES (TIPO) VALUES ('Kgr.');
INSERT INTO UNIDADES (TIPO) VALUES ('ml.');
INSERT INTO UNIDADES (TIPO) VALUES ('l.');
INSERT INTO UNIDADES (TIPO) VALUES ('unidades');

CREATE TABLE ETIQUETAS (
       IDPLATO INTEGER,
       ETIQUETA CHAR(50) NOT NULL,
       PRIMARY KEY(IDPLATO,ETIQUETA)
         );

INSERT INTO ETIQUETAS (IDPLATO,ETIQUETA) VALUES (-1,'Desayuno');
INSERT INTO ETIQUETAS (IDPLATO,ETIQUETA) VALUES (-1,'Almuerzo');
INSERT INTO ETIQUETAS (IDPLATO,ETIQUETA) VALUES (-1,'Comida');
INSERT INTO ETIQUETAS (IDPLATO,ETIQUETA) VALUES (-1,'Merienda');
INSERT INTO ETIQUETAS (IDPLATO,ETIQUETA) VALUES (-1,'Cena');

CREATE TABLE ALIMENTOS (IDALIMENTO INTEGER PRIMARY KEY AUTOINCREMENT,NOMBRE CHAR(100) NOT NULL);
CREATE UNIQUE INDEX idx_nombres_alimentos ON ALIMENTOS(NOMBRE);

CREATE TABLE INGREDIENTES (
    IDPLATO INTEGER NOT NULL,
    IDALIMENTO INTEGER NOT NULL,
    IDUNIDAD INTEGER NOT NULL,
    CANTIDAD DECIMAL (4,2),
    PRIMARY KEY(IDPLATO,IDALIMENTO),
    FOREIGN KEY (IDPLATO) REFERENCES PLATOS (IDPLATO),
    FOREIGN KEY (IDALIMENTO) REFERENCES ALIMENTOS (IDALIMENTO),
    FOREIGN KEY (IDUNIDAD) REFERENCES UNIDADES (IDUNIDAD)
          );
CREATE INDEX idx_ingredientes_platos ON INGREDIENTES(IDPLATO);
CREATE INDEX idx_ingredientes_alimentos ON INGREDIENTES(IDALIMENTO);

CREATE TABLE COMIDAS (
    DIA INTEGER NOT NULL,
    INGESTA CHAR(20) NOT NULL,
    IDPLATO INTEGER NOT NULL,
    RACIONES DECIMAL (2,2) NOT NULL,
    COMPRA INTEGER NOT NULL,
    PRIMARY KEY(DIA,INGESTA,IDPLATO));
CREATE INDEX idx_comidas_dia ON COMIDAS(DIA);
CREATE INDEX idx_comidas_ingestas ON COMIDAS(INGESTA);
CREATE INDEX idx_comidas_dia_ingestas ON COMIDAS(DIA,INGESTA);

CREATE TABLE COMPRA (
    IDALIMENTO INTEGER PRIMARY KEY NOT NULL,
    IDUNIDAD INTEGER NOT NULL,
    CANTIDAD DECIMAL (4,2),
    COMPRADO INTEGER NOT NULL,
    FOREIGN KEY (IDALIMENTO) REFERENCES ALIMENTOS (IDALIMENTO),
    FOREIGN KEY (IDUNIDAD) REFERENCES UNIDADES (IDUNIDAD)
 );
CREATE UNIQUE INDEX idx_compra_alimentos ON COMPRA(IDALIMENTO);

CREATE TABLE TIPOINGESTA (INGESTA CHAR(20) NOT NULL);
INSERT INTO TIPOINGESTA(INGESTA) VALUES('Desayuno');
INSERT INTO TIPOINGESTA(INGESTA) VALUES('Segundo desayuno');
INSERT INTO TIPOINGESTA(INGESTA) VALUES('Comida');
INSERT INTO TIPOINGESTA(INGESTA) VALUES('Merinenda');
INSERT INTO TIPOINGESTA(INGESTA) VALUES('Cena');

INSERT INTO COMIDAS VALUES(date('now','start of year','0 months','weekday 2'),'1');
INSERT INTO COMIDAS VALUES(date('now','start of year','+1 months','weekday 1'),'1');
INSERT INTO COMIDAS VALUES(date('now','start of year','+2 months','weekday 5'),'1');
INSERT INTO COMIDAS VALUES(date('2022-1-13'),3)
SELECT * FROM 

INSERT INTO INGREDIENTES VALUES (1,1,1,1);
INSERT INTO PLATOS (NOMBRE) VALUES ('PLATO1');
INSERT INTO ALIMENTOS(NOMBRE) VALUES ('ALIMENTRO1');
INSERT INTO INGREDIENTES VALUES (1,1,1,1);
DROP TABLE INGREDIENTES;
DROP TABLE PLATOS;
DROP TABLE UNIDADES;
DROP TABLE ALIMENTOS;
DROP TABLE COMIDAS;
DROP TABLE COMPRA;
DROP TABLE TIPOINGESTA;

// A ver si se puede distinguir de los platos cuáles son más adecuados para cenas, desayunos, comidas o meriendas
Es decir, si quiero seleccionar un plato para una comida, listar los platos disponibles, pero filtrar los que serían para desayuno merienda o cena.

Serí agenerar una relación nueva entre platos y una tabla nueva que sería ingesta o un set de datos que podrían ser
    Desayuno
    Segundo desayuno
    Comida
    Merinenda
    Cena